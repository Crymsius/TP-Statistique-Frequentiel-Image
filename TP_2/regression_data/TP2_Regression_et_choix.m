%image Ia et Ibglobal Ia = double(imread('keble_a.jpg'));global Ib = double(imread('keble_b.jpg'));rx1 = [[590 369 1] [0 0 0] [-299*590 -299*369 -299]];ry1 = [[0 0 0] [590 369 1] [-364*590 -364*369 -364]];rx2 = [[405 295 1] [0 0 0] [-115*405 -115*295 -115]];ry2 = [[0 0 0] [405 295 1] [-293*405 -293*295 -293]];rx3 = [[652 112 1] [0 0 0] [-364*652 -364*112 -364]];ry3 = [[0 0 0] [652 112 1] [-123*652 -123*112 -123]];rx4 = [[340 92 1] [0 0 0] [-49*340 -49*92 -49]];ry4 = [[0 0 0] [340 92 1] [-77*340 -77*92 -77]];M = [rx1;ry1;rx2;ry2;rx3;ry3;rx4;ry4];[U,S,V] = svd(M);V0 = transpose(V(:,end));H = [ [V0(1:3)] ; [V0(4:6)] ; [V0(7:9)] ];A = H*[0;0;1];B = H*[720;0;1];C = H*[720;568;1];D = H*[0;568;1];Points = [A/A(3) B/B(3) C/C(3) D/D(3)];X1 = min(Points(1,:));X2 = max(Points(1,:));Y1 = min(Points(2,:));Y2 = max(Points(2,:));Ima = vgg_warp_H(Ia, H, 'linear',[X1, X2+720, Y1, Y2]);Imb = vgg_warp_H(Ib, H, 'linear',[X1, X2+720, Y1, Y2]);Imtotal= Ima+Imb;%Igauchevide = zeros(X2-X1, Y2-Y1);%Idroite = [Igauchevide Ia];image(uint8(Ima));axis equal;